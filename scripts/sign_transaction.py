from adpu_call import send_to_ledger
import binascii

# command to generate txn
# ./skycoin-cli createRawTransaction -m '[{ "addr": "2cPurVYpW1MCqk7cjNjqDG531BoRCgJ8iTD", "coins": "1"}, { "addr": "hbWbgT97s7RoGEfqoiiJgV5pkdaAsBow3o", "coins": "1"}, { "addr": "qGJNvH2LM1jrawo1ZggreLYaTpwUXCkzWh", "coins": "1"}, { "addr": "HiDEhbBdNu2pSb3pbTLKKSbjWaqJTQWsAi", "coins": "1"}]' -f 2019_03_05_a794.wlt
# From SkyCoin example https://github.com/skycoin/skycoin/tree/develop/cmd/cli#decode-a-raw-transaction
txn = "4b010000001f246df92297d3088cd5ebb9b97d0e9a4d251809476f61035c45e08fcb4b147a01000000e3aeb078583bdb968bed85fad21e1297f8d2c9f45153b0fb2e8d6d8690c0f1c45518afc1de947543a4a6322191c1547960d26a0c876d7577148b1285116da24600010000005e988727ab8128f5652ac6a8687813728e6457664b0e49c2b69a92d04afd03220500000000e81b683060ab6bb2428965e0d274a5f4dd85a74540420f000000000001000000000000000064e3311b82c8da9d8f04bf9ae29db7a661d4c75e40420f000000000001000000000000000077f2316fd44dec49d126ad6906ed4abf8ba4db4f40420f00000000000100000000000000002987824fe2b4ce03d23b09dc7f65c888ef38a51040420f0000000000010000000000000000316e6527b35f105ab161f648c7cb7415d72feba8808d5b0000000000bb94160000000000"
# txn = "dc00000000247bd0f0a1cf39fa51ea3eca044e4d9cbb28fff5376e90e2eb008c9fe0af384301000000cf5869cb1b21da4da98bdb5dca57b1fd5a6fcbefd37d4f1eb332b21233f92cd62e00d8e2f1c8545142eaeed8fada1158dd0e552d3be55f18dd60d7e85407ef4f000100000005e524872c838de517592c9a495d758b8ab2ec32d3e4d3fb131023a424386634020000000007445b5d6fbbb1a7d70bef941fb5da234a10fcae40420f00000000000100000000000000008001532c3a705e7e62bb0bb80630ecc21a87ec090024f400000000009805000000000000"
print(len(txn[:220*2]))
# x = send_to_ledger(ins=0x10,p1=0x0, data=txn[:220*2])
x = send_to_ledger(ins=0x10,p1=0x0, data=txn[220*2:])
print(x)
